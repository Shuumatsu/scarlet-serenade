<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>My Hakyll Blog - 2020-08-20-fork</title>
    <link rel="stylesheet" href="../../web/static/main.css" />
    <script src="../../web/static/main.bundle.js"></script>
</head>

<body>
    <header>
        <div class="logo">
            <a href="../../">My Hakyll Blog</a>
        </div>
        <nav>
            <a href="../../">Home</a>
            <a href="../../about.html">About</a>
            <a href="../../contact.html">Contact</a>
            <a href="../../archive.html">Archive</a>
        </nav>
    </header>

    <main role="main">
        <h1>2020-08-20-fork</h1>
        <article>
    <section class="header">
        
    </section>
    <section>
        <code-snippet indent="0" block="true">#include &lt;sys/types.h&gt;
#include &lt;sys/wait.h&gt;
#include &lt;stdio.h&gt;
#include &lt;pthread.h&gt;

void helper(void) {
        exit(42);
}

int main() {
        int kirito = 0;
        pid_t pid = fork();
        if (pid) {
                wait(&amp;kirito);
        } else {
                helper();
        }
        printf(&quot;%d %d\n&quot;, pid, kirito);
        printf(&quot;%d %d\n&quot;, pid, WEXITSTATUS(kirito));
}

</code-snippet>
<p indent="0"><code-snippet>fork</code-snippet> 在父进程返回子进程的 id，在失败的时候返回 -1，在子进程返回 0</p>
<p indent="0"><code-snippet>wait(&status)</code-snippet> 等待一个状态，并不指定是哪个子进程返回的状态，取第一个</p>
<p indent="0">通常状态存储在  status 的低 16 位的高 8 位，用  <code-snippet>WEXITSTATUS</code-snippet> 取得状态</p>
    </section>
</article>
    </main>

    <footer>
        Site proudly generated by
        <a href="http://jaspervdj.be/hakyll">Hakyll</a>
    </footer>
</body>

</html>